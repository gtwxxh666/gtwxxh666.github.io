<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>汤木的幻想乡</title>
  
  
  <link href="https://tangmv.cn/atom.xml" rel="self"/>
  
  <link href="https://tangmv.cn/"/>
  <updated>2024-05-03T04:56:15.848Z</updated>
  <id>https://tangmv.cn/</id>
  
  <author>
    <name>Tangmu</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hello World</title>
    <link href="https://tangmv.cn/posts/3eeb.html"/>
    <id>https://tangmv.cn/posts/3eeb.html</id>
    <published>2024-05-03T04:56:15.848Z</published>
    <updated>2024-05-03T04:56:15.848Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a class="headerlink" href="#Quick-Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a class="headerlink" href="#Create-a-new-post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a class="headerlink" href="#Run-server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a class="headerlink" href="#Generate-static-files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a class="headerlink" href="#Deploy-to-remote-sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup><mo>=</mo><msup><mi>c</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">a^2+b^2 = c^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9474em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8641em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8641em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>使用Github Action部署Hexo的经历</title>
    <link href="https://tangmv.cn/posts/4691.html"/>
    <id>https://tangmv.cn/posts/4691.html</id>
    <published>2024-05-01T11:31:25.000Z</published>
    <updated>2024-05-03T04:56:15.848Z</updated>
    
    <content type="html"><![CDATA[<h1 id="基础"><a class="headerlink" href="#基础"></a>基础</h1><p>原理：用户提交仓库，触发main分支修改，触发Github Action运行，Public文件写入Github Pages仓库。触发Vercel部署，CDN缓存刷新。</p><h2 id="创建源代码仓库"><a class="headerlink" href="#创建源代码仓库"></a>创建源代码仓库</h2><p>这个仓库就是存放我们Blog源代码文件的。当然，如果不介意的话，你也可以创建一个公开的仓库。</p><p>本教程以私密仓库为例讲解。 名称随意。</p><p><img src="https://bu.dusays.com/2024/05/02/66331126a2bc3.png" alt="" loading="lazy"></p><p>通过<code>git clone</code>将仓库克隆到此电脑中。</p><p><img src="https://bu.dusays.com/2024/05/02/66331189caaeb.png" alt="" loading="lazy"></p><details ><summary>如果出现了权限问题……</summary><div class="content"><p>在终端运行以下指令生成密钥。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure><p>用记事本打开存储在<code>C:\Users\xxx\.ssh\id_rsa.pub</code>文件，并复制。</p><p>在Github设置，SSH and GPG keys，点击<code>New SSH key</code></p><p>Title随意，Key type不动，将复制的内容粘贴到Key中。</p><p><img src="https://bu.dusays.com/2024/05/02/663318839a1a8.png" alt="" loading="lazy"></p></div></details><h2 id="编写Action脚本"><a class="headerlink" href="#编写Action脚本"></a>编写Action脚本</h2><ol><li><p>将源代码复制到刚才克隆的文件夹中</p><blockquote><p><strong>提醒</strong></p><p>请注意你所使用的主题文件夹内是否有.git这个文件夹，若有，请删除，否则会对后面的提交有影响。</p></blockquote></li><li><p>在根目录下新建<code>.github</code>文件夹，在其中再次新建<code>workflows</code>文件夹。在文件内新建<code>deploy.yml</code>文件，写入以下内容：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">自动部署</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line">  <span class="attr">release:</span></span><br><span class="line">    <span class="attr">types:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">published</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">检查分支</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">ref:</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">安装</span> <span class="string">Node</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">node-version:</span> <span class="string">&quot;20.x&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">安装</span> <span class="string">Hexo</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        export TZ=&#x27;Asia/Shanghai&#x27;</span></span><br><span class="line"><span class="string">        npm install hexo-cli -g</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">缓存</span> <span class="string">Hexo</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/cache@v1</span></span><br><span class="line">      <span class="attr">id:</span> <span class="string">cache</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">node_modules</span></span><br><span class="line">        <span class="attr">key:</span> <span class="string">$&#123;&#123;runner.OS&#125;&#125;-$&#123;&#123;hashFiles(&#x27;**/package-lock.json&#x27;)&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">安装依赖</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        npm install</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">生成静态文件</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        hexo clean</span></span><br><span class="line"><span class="string">        hexo generate</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">部署</span> </span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        cd ./public</span></span><br><span class="line"><span class="string">        git init</span></span><br><span class="line"><span class="string">        git config --global user.name &#x27;$&#123;&#123; secrets.GITHUBUSERNAME &#125;&#125;&#x27;</span></span><br><span class="line"><span class="string">        git config --global user.email &#x27;$&#123;&#123; secrets.GITHUBEMAIL &#125;&#125;&#x27;</span></span><br><span class="line"><span class="string">        git add .</span></span><br><span class="line"><span class="string">        git commit -m &quot;$&#123;&#123; github.event.head_commit.message &#125;&#125; $(date +&quot;%Z %Y-%m-%d %A %H:%M:%S&quot;) Updated By Github Actions&quot;</span></span><br><span class="line"><span class="string">        git push --force --quiet &quot;https://$&#123;&#123; secrets.GITHUBUSERNAME &#125;&#125;:$&#123;&#123; secrets.GITHUBTOKEN &#125;&#125;@github.com/$&#123;&#123; secrets.GITHUBUSERNAME &#125;&#125;/$&#123;&#123; secrets.GITHUBUSERNAME &#125;&#125;.github.io.git&quot; master:main</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>提醒</strong></p><p>第22行的node-version建议与本地的版本一致，请在终端运行<code>node -v</code>查看版本号。</p><p>如：终端输出v20.12.2，那么在文件里写20.x</p></blockquote></li><li><p>在Github仓库设置中添加环境变量。</p><p><img src="https://bu.dusays.com/2024/05/02/66331ea8aa135.png" alt="" loading="lazy"></p><table><thead><tr><th>变量名</th><th>内容</th></tr></thead><tbody><tr><td>GITHUBEMAIL</td><td>你的Github账号邮箱。</td></tr><tr><td>GITHUBTOKEN</td><td>在<a href="https://github.com/settings/apps">Developer Settings</a>，Personal access tokens (classic)中新建填写。</td></tr><tr><td>GITHUBUSERNAME</td><td>你的Github用户名。</td></tr></tbody></table><blockquote><p><strong>提醒</strong></p><p>创建Token中务必勾选以下两个权限。</p><p>且Token只显示一次。</p><p><img src="https://bu.dusays.com/2024/05/02/663321ab83f96.png" alt="" loading="lazy"></p></blockquote></li></ol><h2 id="提交"><a class="headerlink" href="#提交"></a>提交</h2><ol><li><p>添加屏蔽项。</p><p>像node_modules等文件夹在Action部署时会自己生成，我们也没必要在上传。</p><p>在根目录新建<code>.gitignore</code>文件，写入以下内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line">db.json</span><br><span class="line">*.log</span><br><span class="line">node_modules/</span><br><span class="line">public/</span><br><span class="line">.deploy*/</span><br><span class="line">.deploy_git*/</span><br><span class="line">.idea</span><br><span class="line">themes/solitude/.git</span><br></pre></td></tr></table></figure></li><li><p>在终端运行以下指令，提交。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b main</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;Action&quot;</span></span><br><span class="line">git push origin main</span><br></pre></td></tr></table></figure><p>如果你使用Vscode，你也可以直接在Code里打开此文件夹，提交</p><p><img src="https://bu.dusays.com/2024/05/02/6633235203a10.png" alt="" loading="lazy"></p></li></ol><h2 id="CDN"><a class="headerlink" href="#CDN"></a>CDN</h2><a class="tag-link" target="_blank" href="https://blog.anheyu.com/posts/136a.html">    <div class="tag-link-tips">引用站外链接</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://api.iowen.cn/favicon/blog.anheyu.com.png)">            <i class="solitude st-link-m-line" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">什么是CDN？它解决了什么难题？国内CDN加Vercel，无服务器使用办法</div>            <div class="tag-link-sitename">安和鱼</div>        </div>        <i class="solitude st-arrow-right-bold"></i>    </div>    </a><h1 id="查看"><a class="headerlink" href="#查看"></a>查看</h1><p><img src="https://bu.dusays.com/2024/05/02/663323b5daa76.png" alt="" loading="lazy"></p><h1 id="FAQ"><a class="headerlink" href="#FAQ"></a>FAQ</h1><details open><summary>Git提交时报HTTPS443等类似问题</summary><div class="content"><p>玄学问题，建议使用🪜🧪。</p></div></details><p>更多问题待补充……</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;基础&quot;&gt;&lt;a class=&quot;headerlink&quot; href=&quot;#基础&quot;&gt;&lt;/a&gt;基础&lt;/h1&gt;
&lt;p&gt;原理：用户提交仓库，触发main分支修改，触发Github Action运行，Public文件写入Github Pages仓库。触发Vercel部署，CDN缓存</summary>
      
    
    
    
    <category term="技术分享" scheme="https://tangmv.cn/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="Windows" scheme="https://tangmv.cn/tags/Windows/"/>
    
  </entry>
  
</feed>
